<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Live RSS AI Articles</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
  body {
    margin: 0;
    background: black;
    color: #00FF7F;
    font-family: monospace;
    white-space: pre-wrap;
    padding: 10px;
  }
  a { color: #33f1b1; text-decoration: none; }
</style>
</head>
<body>
<pre id="term">[Starting live RSS AI article feed...]\n</pre>

<script>
"use strict";
const term = document.getElementById("term");
const now = () => new Date().toISOString().replace('T',' ').replace(/\..+/,'');

function println(s="") {
  term.textContent += s + "\n";
  term.scrollTop = term.scrollHeight;
}

// Minimal readable text extractor
function extractReadable(html){
  const doc = new DOMParser().parseFromString(html, "text/html");
  doc.querySelectorAll('script,style,noscript,iframe').forEach(e=>e.remove());
  return (doc.body?.innerText || '').replace(/\s+/g,' ').trim();
}

// Basic keyword grabber
function keywords(text, limit=5) {
  const words = (text.toLowerCase().match(/\b[a-z]{4,}\b/g) || []);
  const freq = {};
  for (let w of words) freq[w] = (freq[w] || 0) + 1;
  return Object.entries(freq).sort((a,b)=>b[1]-a[1]).slice(0,limit).map(e=>e[0]);
}

// Simple summarizer (first N sentences)
function summarize(text, sentences=5) {
  return text.split(/(?<=[.!?])\s+/).slice(0,sentences).join(" ");
}

async function fetchText(url) {
  const r = await fetch(url);
  if (!r.ok) throw new Error(r.status);
  return await r.text();
}

function parseFeed(xmlTxt){
  const doc = new DOMParser().parseFromString(xmlTxt, "application/xml");
  let items = Array.from(doc.querySelectorAll('item, entry'));
  return items.map(n => ({
    title: n.querySelector('title')?.textContent.trim() || '',
    link: n.querySelector('link')?.getAttribute('href') || n.querySelector('link')?.textContent.trim() || ''
  }));
}

async function processItem(item) {
  println(`[${now()}] NEW: ${item.title}`);
  try {
    const html = await fetchText(item.link);
    const clean = extractReadable(html);
    if (!clean) { println(`(no content)\n`); return; }
    const summary = summarize(clean, 7);
    const kw = keywords(clean, 5).join(", ");
    println(`Summary:\n${summary}\n`);
    println(`Keywords: ${kw}\n`);
    println(`Source: ${item.link}\n`);
    println(`------------------------------------------------------------\n`);
  } catch(e) {
    println(`Error fetching article: ${e}\n`);
  }
}

async function pollFeeds() {
  const feeds = [
    "https://feeds.washingtonpost.com/rss/national",
    "https://www.forbes.com/most-popular/feed/"
  ];
  for (let feed of feeds) {
    try {
      const xml = await fetchText(feed);
      const items = parseFeed(xml).slice(0,3);
      for (let it of items) {
        await processItem(it);
      }
    } catch(e) {
      println(`[${now()}] Feed error (${feed}): ${e}\n`);
    }
  }
}

// Run immediately and repeat
pollFeeds();
setInterval(pollFeeds, 180000); // every 3 min
</script>
</body>
</html>
