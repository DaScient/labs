<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>DaScient‚Ñ¢ Cosmic Universe - Enhanced VR Command Center</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Exo+2:wght@300;400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/typed.js/2.0.12/typed.min.js"></script>
  <script src="https://unpkg.com/splitting@1.0.6/dist/splitting.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/splitting@1.0.6/dist/splitting.css">
  
  <style>
    /* === CORE STYLES === */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body {
      height: 100%; width: 100%; overflow: hidden; font-family: 'Exo 2', sans-serif;
      background: radial-gradient(ellipse at center, #0a0e2a 0%, #000000 70%);
      color: #e0f7ff; perspective: 1000px; transform-style: preserve-3d;
      position: fixed; top: 0; left: 0; right: 0; bottom: 0;
      overscroll-behavior: none; -webkit-overflow-scrolling: touch;
    }

    /* === AUTO-HIDE SYSTEM === */
    .auto-hide {
      transition: opacity 0.5s ease, transform 0.5s ease;
      opacity: 1;
    }
    
    .auto-hide.hidden {
      opacity: 0 !important;
      pointer-events: none !important;
      transform: translateZ(0) !important;
    }
    
    /* Reveal indicator */
    .reveal-hint {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%) translateZ(500px);
      background: rgba(10, 20, 40, 0.8);
      border: 1px solid rgba(0, 255, 255, 0.5);
      border-radius: 20px;
      padding: 8px 16px;
      font-size: 11px;
      color: #00ffff;
      font-family: 'Orbitron', monospace;
      opacity: 0;
      transition: opacity 0.3s ease;
      pointer-events: none;
      z-index: 1000;
    }
    
    .reveal-hint.visible {
      opacity: 0.7;
    }

    /* === TYPOGRAPHY === */
    .cosmic-title {
      font-family: 'Orbitron', monospace; font-weight: 900;
      background: linear-gradient(45deg, #00ffff, #ff00ff, #ffff00, #00ff00);
      background-size: 400% 400%; -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      animation: cosmicGradient 3s ease-in-out infinite;
      text-shadow: 0 0 30px rgba(0, 255, 255, 0.5);
      font-size: clamp(1.5rem, 4vw, 3rem);
    }
    @keyframes cosmicGradient { 0%,100%{background-position:0% 50%} 50%{background-position:100% 50%} }
    @keyframes float { 0%,100%{transform:translateY(0px) rotateX(0deg)} 50%{transform:translateY(-20px) rotateX(5deg)} }
    @keyframes pulse { 0%,100%{opacity:0.8;transform:scale(1)} 50%{opacity:1;transform:scale(1.05)} }
    @keyframes cosmicRotate { from{transform:rotate(0deg) rotateX(0deg)} to{transform:rotate(360deg) rotateX(360deg)} }
    @keyframes glitch { 0%,100%{filter:none} 25%{filter:contrast(150%) brightness(150%) hue-rotate(90deg)} 50%{filter:none} 75%{filter:contrast(200%) brightness(120%) hue-rotate(180deg)} }

    /* === CANVAS & EFFECTS === */
    #cosmicCanvas { display: block; position: absolute; top: 0; left: 0; z-index: 1; width: 100%; height: 100%; transform-style: preserve-3d; max-width: 100vw; max-height: 100vh; }
    .ui-overlay { position: absolute; z-index: 10; pointer-events: none; transform: translateZ(50px); backface-visibility: hidden; max-width: 100vw; max-height: 100vh; overflow: hidden; }
    .ui-panel { background: rgba(10, 20, 40, 0.3); backdrop-filter: blur(10px); border: 1px solid rgba(0, 255, 255, 0.2); border-radius: 15px; padding: 15px; box-shadow: 0 8px 32px rgba(0,0,0,0.3); transition: all 0.3s ease; transform: translateZ(20px); max-width: 280px; }
    .ui-panel:hover { background: rgba(20, 40, 80, 0.4); border-color: rgba(0, 255, 255, 0.4); box-shadow: 0 12px 40px rgba(0, 255, 255, 0.2); transform: translateZ(30px) scale(1.02); }

    /* === NAVIGATION === */
    .nav-container { position: absolute; top: 15px; left: 50%; transform: translateX(-50%) translateZ(100px); z-index: 20; pointer-events: all; max-width: 90vw; }
    .nav-menu { display: flex; gap: 15px; background: rgba(10, 20, 40, 0.2); backdrop-filter: blur(15px); border: 1px solid rgba(0, 255, 255, 0.3); border-radius: 25px; padding: 10px 20px; box-shadow: 0 8px 32px rgba(0,0,0,0.3); transform-style: preserve-3d; flex-wrap: wrap; justify-content: center; }
    .nav-item { color: #a0f0ff; text-decoration: none; font-family: 'Orbitron', monospace; font-weight: 600; font-size: clamp(10px, 2vw, 12px); padding: 8px 12px; border-radius: 20px; transition: all 0.3s ease; position: relative; overflow: hidden; transform: translateZ(10px); white-space: nowrap; text-align: center; }
    .nav-item::before { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(0, 255, 255, 0.2), transparent); transition: left 0.5s ease; transform: translateZ(-5px); }
    .nav-item:hover::before { left: 100%; }
    .nav-item:hover { color: #00ffff; text-shadow: 0 0 20px rgba(0, 255, 255, 0.8); background: rgba(0, 255, 255, 0.1); transform: translateY(-2px) translateZ(15px); }

    /* === HERO SECTION === */
    .hero-container { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) translateZ(200px); text-align: center; z-index: 15; pointer-events: none; transform-style: preserve-3d; max-width: 90vw; max-height: 80vh; }
    .hero-title { font-size: clamp(2rem, 6vw, 4rem); margin-bottom: 15px; animation: float 6s ease-in-out infinite; transform: translateZ(100px); text-shadow: 0 0 50px rgba(0, 255, 255, 0.8); }
    .hero-subtitle { font-size: clamp(1rem, 2.5vw, 1.5rem); margin-bottom: 25px; opacity: 0.9; transform: translateZ(80px); }
    .hero-description { font-size: clamp(0.8rem, 1.8vw, 1rem); max-width: 600px; margin: 0 auto; line-height: 1.4; opacity: 0.8; transform: translateZ(60px); }

    /* === CONTROL PANEL === */
    .control-panel { position: absolute; bottom: 15px; right: 15px; z-index: 20; pointer-events: all; max-width: 250px; transform: translateZ(150px); }
    .control-toggle { background: rgba(10, 20, 40, 0.4); border: 1px solid rgba(0, 255, 255, 0.3); border-radius: 50px; padding: 10px 15px; color: #a0f0ff; font-family: 'Orbitron', monospace; font-size: clamp(10px, 2vw, 12px); cursor: pointer; transition: all 0.3s ease; margin-bottom: 10px; transform: translateZ(10px); }
    .control-toggle:hover { background: rgba(0, 255, 255, 0.2); transform: translateY(-2px) translateZ(15px); }
    .control-menu { display: none; flex-direction: column; gap: 10px; }
    .control-menu.active { display: flex; }
    .control-item { display: flex; align-items: center; justify-content: space-between; padding: 6px 0; }
    .control-item label { font-size: clamp(9px, 1.8vw, 11px); color: #e0f7ff; }
    .control-item input[type="checkbox"] { appearance: none; width: 36px; height: 18px; background: rgba(100,100,100,0.5); border-radius: 9px; position: relative; cursor: pointer; transition: background 0.3s ease; }
    .control-item input[type="checkbox"]:checked { background: rgba(0, 255, 255, 0.5); }
    .control-item input[type="checkbox"]::before { content: ''; position: absolute; top: 2px; left: 2px; width: 14px; height: 14px; background: #fff; border-radius: 50%; transition: transform 0.3s ease; }
    .control-item input[type="checkbox"]:checked::before { transform: translateX(18px); }
    .control-item select { background: rgba(10,20,40,0.6); border: 1px solid rgba(0,255,255,0.3); border-radius: 8px; padding: 4px 8px; color: #a0f0ff; font-size: clamp(9px, 1.8vw, 11px); }

    /* === TERMINAL === */
    .terminal { position: absolute; top: 15px; left: 15px; width: clamp(250px, 35vw, 320px); height: clamp(150px, 25vh, 200px); background: rgba(0,0,0,0.7); border: 1px solid rgba(0,255,255,0.3); border-radius: 10px; padding: 12px; font-family: 'Courier New', monospace; font-size: clamp(9px, 1.6vw, 11px); color: #00ff00; overflow-y: auto; z-index: 15; pointer-events: none; transform: translateZ(120px); }
    .terminal::before { content: 'COSMIC VR TERMINAL v3.0'; display: block; text-align: center; color: #ffff00; margin-bottom: 8px; font-weight: bold; font-size: clamp(9px, 1.8vw, 12px); }

    /* === INTERACTIVE ELEMENTS === */
    .cosmic-button { background: linear-gradient(45deg, rgba(0,255,255,0.2), rgba(255,0,255,0.2)); border: 2px solid rgba(0,255,255,0.5); border-radius: 25px; padding: 10px 20px; color: #00ffff; font-family: 'Orbitron', monospace; font-weight: 600; font-size: clamp(10px, 2vw, 12px); cursor: pointer; transition: all 0.3s ease; text-transform: uppercase; letter-spacing: 1px; position: relative; overflow: hidden; transform: translateZ(25px); }
    .cosmic-button::before { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent); transition: left 0.5s ease; }
    .cosmic-button:hover::before { left: 100%; }
    .cosmic-button:hover { background: linear-gradient(45deg, rgba(0,255,255,0.4), rgba(255,0,255,0.4)); border-color: rgba(0,255,255,0.8); color: #ffffff; transform: translateY(-3px) translateZ(35px); box-shadow: 0 15px 40px rgba(0,255,255,0.4); }

    /* === STATUS INDICATORS === */
    .status-indicator { position: absolute; top: 15px; right: 15px; z-index: 15; pointer-events: none; transform: translateZ(120px); max-width: 200px; }
    .status-item { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; font-size: clamp(8px, 1.6vw, 10px); color: #a0f0ff; transform: translateZ(10px); }
    .status-dot { width: 8px; height: 8px; border-radius: 50%; animation: pulse 2s infinite; }
    .status-dot.online { background: #00ff00; }
    .status-dot.processing { background: #ffff00; }
    .status-dot.warning { background: #ff6600; }

    /* === VR CONTROLS === */
    .vr-controls { position: absolute; bottom: 15px; left: 15px; z-index: 20; pointer-events: all; transform: translateZ(150px); }
    .vr-toggle { background: rgba(255,0,255,0.2); border: 2px solid rgba(255,0,255,0.5); border-radius: 15px; padding: 8px 12px; color: #ff00ff; font-family: 'Orbitron', monospace; font-size: clamp(9px, 1.8vw, 11px); cursor: pointer; transition: all 0.3s ease; margin-bottom: 8px; transform: translateZ(20px); }
    .vr-toggle:hover { background: rgba(255,0,255,0.3); transform: translateY(-2px) translateZ(25px); }
    .vr-status { font-size: clamp(8px, 1.6vw, 10px); color: #a0f0ff; text-align: center; transform: translateZ(15px); }

    /* === VR INFO & CALIBRATION === */
    .vr-info { position: absolute; top: 50%; right: 15px; transform: translateY(-50%) translateZ(180px); background: rgba(10,20,40,0.8); border: 1px solid rgba(0,255,255,0.3); border-radius: 15px; padding: 15px; max-width: 180px; z-index: 15; pointer-events: none; }
    .vr-info h4 { color: #00ffff; font-family: 'Orbitron', monospace; margin-bottom: 10px; font-size: clamp(12px, 2.2vw, 14px); }
    .vr-info p { font-size: clamp(9px, 1.8vw, 11px); color: #a0f0ff; line-height: 1.3; margin-bottom: 6px; }
    .gyro-status { padding: 4px 8px; border-radius: 10px; font-size: clamp(8px, 1.6vw, 10px); font-weight: 600; text-align: center; margin-top: 8px; }
    .gyro-status.enabled { background: rgba(0,255,0,0.2); color: #00ff00; border: 1px solid rgba(0,255,0,0.3); }
    .gyro-status.disabled { background: rgba(255,0,0,0.2); color: #ff0000; border: 1px solid rgba(255,0,0,0.3); }
    
    .gyro-calibration { position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%) translateZ(300px); background: rgba(10,20,40,0.95); border: 2px solid rgba(0,255,255,0.5); border-radius: 20px; padding: 25px; text-align: center; z-index: 100; display: none; max-width: 90vw; max-height: 80vh; }
    .gyro-calibration.active { display: block; }
    .calibration-title { color: #00ffff; font-family: 'Orbitron', monospace; font-size: clamp(16px, 4vw, 20px); margin-bottom: 15px; }
    .calibration-instructions { color: #e0f7ff; font-size: clamp(12px, 2.5vw, 14px); line-height: 1.4; margin-bottom: 20px; }
    .calibration-button { background: linear-gradient(45deg, #00ffff, #ff00ff); border: none; border-radius: 25px; padding: 10px 25px; color: #000; font-family: 'Orbitron', monospace; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: clamp(12px, 2.5vw, 14px); }
    .calibration-button:hover { transform: scale(1.05); box-shadow: 0 10px 30px rgba(0,255,255,0.5); }

    /* === VR MODE === */
    .vr-mode { perspective: 2000px; }
    .vr-mode .ui-overlay { transform: translateZ(200px) !important; }
    .vr-mode .hero-container { transform: translate(-50%,-50%) translateZ(400px) !important; }

    /* === RESPONSIVE === */
    @media (max-width: 768px) {
      .nav-menu { gap: 8px; padding: 8px 15px; }
      .nav-item { padding: 6px 10px; font-size: 10px; }
      .control-panel { bottom: 10px; right: 10px; max-width: 220px; }
      .terminal { top: 10px; left: 10px; width: clamp(200px, 45vw, 280px); height: clamp(120px, 30vh, 180px); padding: 10px; }
      .vr-controls { bottom: 10px; left: 10px; }
      .vr-info { right: 10px; max-width: 160px; padding: 15px; }
      .status-indicator { top: 10px; right: 10px; max-width: 180px; }
      .hero-container { max-width: 95vw; padding: 0 10px; }
      .hero-title { font-size: clamp(1.5rem, 5vw, 2.5rem); }
      .hero-subtitle { font-size: clamp(0.9rem, 2.5vw, 1.2rem); }
      .hero-description { font-size: clamp(0.7rem, 1.8vw, 0.9rem); }
    }

    /* === PERFORMANCE === */
    .low-performance { filter: blur(0px) !important; backdrop-filter: none !important; }
    .low-performance .cosmic-title { animation: none !important; }
    .low-performance .nav-item::before { display: none !important; }
    .low-performance .cosmic-button::before { display: none !important; }
  </style>
</head>
<body>
  <!-- Background Canvas -->
  <canvas id="cosmicCanvas"></canvas>
  <div class="particle-container" id="particleContainer"></div>
  
  <!-- Gyroscope Calibration (auto-hide exempt) -->
  <div class="gyro-calibration" id="gyroCalibration">
    <h3 class="calibration-title">üåå VR COSMIC MODE</h3>
    <p class="calibration-instructions">
      Point your device in any direction to explore the cosmic universe.<br>
      Tilt, rotate, and move your device to navigate through 3D space.<br>
      Touch stars to teleport to different dimensions.
    </p>
    <button class="calibration-button" onclick="startVRExperience()">ACTIVATE COSMIC VR</button>
  </div>
  
  <!-- Reveal Hint (auto-hide exempt) -->
  <div class="reveal-hint" id="revealHint">Move mouse or touch screen to show controls</div>
  
  <!-- Navigation (auto-hide) -->
  <nav class="nav-container auto-hide" id="navContainer">
    <div class="nav-menu">
      <a href="index.html" class="nav-item">üåå Cosmic Hub</a>
      <a href="stocks.html" class="nav-item">‚≠ê Stellar Markets</a>
      <a href="crypto.html" class="nav-item">üíé Crypto Nebula</a>
      <a href="ai-tools.html" class="nav-item">ü§ñ AI Matrix</a>
    </div>
  </nav>
  
  <!-- Hero Section (auto-hide) -->
  <div class="hero-container auto-hide" id="heroContainer">
    <h1 class="hero-title cosmic-title">COSMIC VR UNIVERSE</h1>
    <h2 class="hero-subtitle">360¬∞ Gyroscopic Command Center</h2>
    <p class="hero-description">
      Navigate through the cosmic datascape using device orientation.<br>
      Point your device to explore stellar markets, crypto nebulas, and AI matrices.<br>
      <strong>Move your device around to experience full 3D navigation!</strong>
    </p>
  </div>
  
  <!-- VR Info Panel (auto-hide) -->
  <div class="vr-info auto-hide" id="vrInfoPanel">
    <h4>üéÆ VR Controls</h4>
    <p><strong>Gyroscope:</strong> Point device to navigate</p>
    <p><strong>Touch:</strong> Tap stars to teleport</p>
    <p><strong>Tilt:</strong> Up/down for zoom</p>
    <p><strong>Rotate:</strong> 360¬∞ exploration</p>
    <div class="gyro-status disabled" id="gyroStatus">GYROSCOPE OFF</div>
  </div>
  
  <!-- Terminal (auto-hide) -->
  <div class="terminal auto-hide" id="terminal">
    <div id="terminal-content">INITIALIZING COSMIC VR UNIVERSE...</div>
  </div>
  
  <!-- Status Indicators (auto-hide) -->
  <div class="status-indicator auto-hide" id="statusIndicator">
    <div class="status-item">
      <div class="status-dot online"></div>
      <span>Cosmic Link: ACTIVE</span>
    </div>
    <div class="status-item">
      <div class="status-dot processing"></div>
      <span>VR Mode: READY</span>
    </div>
    <div class="status-item">
      <div class="status-dot online"></div>
      <span>Neural Net: SYNCED</span>
    </div>
  </div>
  
  <!-- VR Controls (auto-hide) -->
  <div class="vr-controls auto-hide" id="vrControls">
    <div class="vr-toggle" onclick="toggleVRExperience()">üéÆ VR MODE</div>
    <div class="vr-status" id="vrStatus">Click to enable VR</div>
  </div>
  
  <!-- Control Panel (auto-hide) -->
  <div class="control-panel ui-panel auto-hide" id="controlPanel">
    <div class="control-toggle" id="controlToggle">‚öôÔ∏è COSMIC CONTROLS</div>
    <div class="control-menu" id="controlMenu">
      <div class="control-item">
        <label for="audioToggle">Audio Sensitivity</label>
        <input type="checkbox" id="audioToggle" checked>
      </div>
      <div class="control-item">
        <label for="orientationToggle">360¬∞ Gyroscope</label>
        <input type="checkbox" id="orientationToggle" checked>
      </div>
      <div class="control-item">
        <label for="gyroscopeToggle">Motion Tracking</label>
        <input type="checkbox" id="gyroscopeToggle" checked>
      </div>
      <div class="control-item">
        <label for="glitchToggle">Glitch Effects</label>
        <input type="checkbox" id="glitchToggle">
      </div>
      <div class="control-item">
        <label for="dynamicToggle">Dynamic Colors</label>
        <input type="checkbox" id="dynamicToggle" checked>
      </div>
      <div class="control-item">
        <label for="resolutionSelect">Resolution</label>
        <select id="resolutionSelect">
          <option value="low">Low (10K)</option>
          <option value="medium" selected>Medium (20K)</option>
          <option value="high">High (50K)</option>
          <option value="ultra">Ultra (100K)</option>
          <option value="grandmaster">Grandmaster (200K)</option>
        </select>
      </div>
      <div class="control-item">
        <label for="colorScheme">Color Scheme</label>
        <select id="colorScheme">
          <option value="vibrant" selected>Vibrant</option>
          <option value="pastel">Pastel</option>
          <option value="neon">Neon</option>
          <option value="cosmic">Cosmic</option>
        </select>
      </div>
    </div>
  </div>

  <script>
    // Global Variables
    let scene, camera, renderer, particleSystem, particleMaterial, audioContext, analyser, audioData;
    let audioEnabled = true, orientationEnabled = true, gyroscopeEnabled = true, glitchEnabled = false, dynamicColorsEnabled = true, vrMode = false;
    let deviceOrientation = { alpha: 0, beta: 0, gamma: 0 }, targetRotation = { x: 0, y: 0, z: 0 }, currentRotation = { x: 0, y: 0, z: 0 };
    let particleCount = 10000, isLowPerformance = false, frameRate = 60, lastFrameTime = 0;
    const colorSchemes = {
      vibrant: { r: 1.0, g: 0.2, b: 0.8 },
      pastel: { r: 0.7, g: 0.5, b: 0.9 },
      neon: { r: 0.0, g: 1.0, b: 0.8 },
      cosmic: { r: 0.2, g: 0.0, b: 0.5 }
    };
    let selectedColorScheme = 'vibrant', baseColor = Object.assign({}, colorSchemes[selectedColorScheme]);
    let autoHideTimer, revealHintTimer;

    // === AUTO-HIDE MANAGER ===
    class AutoHideManager {
      constructor() {
        this.hideDelay = 3000; // 3 seconds
        this.elements = document.querySelectorAll('.auto-hide');
        this.revealHint = document.getElementById('revealHint');
        this.init();
      }

      init() {
        this.resetTimer();
        this.setupEventListeners();
        this.showHintAfterDelay();
      }

      setupEventListeners() {
        const events = ['mousemove', 'click', 'touchstart', 'touchmove', 'keydown', 'deviceorientation', 'devicemotion'];
        events.forEach(event => {
          window.addEventListener(event, () => this.showAll(), { passive: true });
          window.addEventListener(event, () => this.resetTimer(), { passive: true });
        });
      }

      showAll() {
        this.elements.forEach(el => el.classList.remove('hidden'));
        this.hideRevealHint();
      }

      hideAll() {
        // Don't hide if calibration is active
        if (document.getElementById('gyroCalibration').classList.contains('active')) return;
        this.elements.forEach(el => el.classList.add('hidden'));
        this.showRevealHint();
      }

      resetTimer() {
        clearTimeout(autoHideTimer);
        autoHideTimer = setTimeout(() => this.hideAll(), this.hideDelay);
      }

      showRevealHint() {
        if (this.revealHint) {
          clearTimeout(revealHintTimer);
          this.revealHint.classList.add('visible');
        }
      }

      hideRevealHint() {
        if (this.revealHint) {
          clearTimeout(revealHintTimer);
          revealHintTimer = setTimeout(() => {
            this.revealHint.classList.remove('visible');
          }, 2000);
        }
      }

      showHintAfterDelay() {
        setTimeout(() => {
          if (this.elements[0].classList.contains('hidden')) {
            this.showRevealHint();
          }
        }, 5000);
      }
    }

    // Performance monitoring
    function monitorPerformance() {
      const now = performance.now();
      const deltaTime = now - lastFrameTime;
      frameRate = 1000 / deltaTime;
      lastFrameTime = now;
      if (frameRate < 30 && !isLowPerformance) {
        isLowPerformance = true;
        document.body.classList.add('low-performance');
        logToTerminal('‚ö†Ô∏è Low performance detected - Optimizing for device');
      } else if (frameRate > 45 && isLowPerformance) {
        isLowPerformance = false;
        document.body.classList.remove('low-performance');
        logToTerminal('‚úÖ Performance restored - Full effects enabled');
      }
    }

    // Initialize Three.js Scene
    function initCosmicScene() {
      const canvas = document.getElementById('cosmicCanvas');
      scene = new THREE.Scene();
      scene.fog = new THREE.Fog(0x000000, 500, 2000);
      camera = new THREE.PerspectiveCamera(90, window.innerWidth / window.innerHeight, 1, 3000);
      camera.position.z = 1000;
      renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true, alpha: true, powerPreference: "high-performance" });
      renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setClearColor(0x000000, 0);
      createParticleSystem();
      createNebulas();
      createInteractiveStars();
      animate();
      initAudio();
      initVRControls();
      logToTerminal('üåå Cosmic VR Universe initialized successfully');
    }

    function createParticleSystem() {
      const geometry = new THREE.BufferGeometry();
      const positions = new Float32Array(particleCount * 3);
      const velocities = new Float32Array(particleCount * 3);
      const colors = new Float32Array(particleCount * 3);
      for (let i = 0; i < particleCount; i++) {
        const i3 = i * 3;
        const radius = 800 + Math.random() * 400;
        const theta = Math.random() * Math.PI * 2;
        const phi = Math.random() * Math.PI;
        positions[i3] = radius * Math.sin(phi) * Math.cos(theta);
        positions[i3 + 1] = radius * Math.sin(phi) * Math.sin(theta);
        positions[i3 + 2] = radius * Math.cos(phi);
        velocities[i3] = (Math.random() - 0.5) * 0.1;
        velocities[i3 + 1] = (Math.random() - 0.5) * 0.1;
        velocities[i3 + 2] = (Math.random() - 0.5) * 0.1;
        colors[i3] = 1.0; colors[i3 + 1] = 1.0; colors[i3 + 2] = 1.0;
      }
      geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
      geometry.setAttribute('velocity', new THREE.BufferAttribute(velocities, 3));
      geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));
      particleMaterial = new THREE.PointsMaterial({
        size: isLowPerformance ? 2 : 3,
        vertexColors: true,
        transparent: true,
        opacity: isLowPerformance ? 0.7 : 0.9,
        blending: THREE.AdditiveBlending
      });
      particleSystem = new THREE.Points(geometry, particleMaterial);
      scene.add(particleSystem);
    }

    function createNebulas() {
      const nebulaCount = isLowPerformance ? 3 : 8;
      for (let i = 0; i < nebulaCount; i++) {
        const nebulaCanvas = document.createElement('canvas');
        nebulaCanvas.width = isLowPerformance ? 128 : 512;
        nebulaCanvas.height = isLowPerformance ? 128
